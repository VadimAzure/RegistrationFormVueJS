<html>
    <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <meta http-equiv="X-UA-Compatible" content="ie=edge" />
          <link href="css/tailwind.min.css" rel="stylesheet">
          <link href="css/style.css" rel="stylesheet" type="text/css"/>
          <title>Vue js Form</title>
    </head>
    <body>

     <div id="app" class="w-full min-h-screen bg-gray-200" v-cloak>
          <nav class="bg-white shadow" role="navigation">
               <div class="container mx-auto p-4 flex flex-wrap items-center sm:flex-no-wrap">
                    <div class="w-full sm:w-auto sm:flex-grow sm:flex">
                         <ul class="flex flex-col mt-4 -mx-4 pt-4 border-t sm:flex-row sm:mx-0 sm:ml-auto sm:mt-0 sm:pt-0 sm:border-0">
                              <li>
                                   <button class="block px-4 py-1 sm:p-2 md:px-4" :class='[{ active: isDisabled("register") }]' @click.prevent='setComponent("register")'>Регитрация</button> 
                              </li>
                              <li>
                                   <button class="block px-4 py-1 sm:p-2 md:px-4" :class='[{ active: isDisabled("signin") }]' @click.prevent='setComponent("signin")'>Войти</button>
                              </li>
                              <li>
                                   <button class="block px-4 py-1 sm:p-2 md:px-4" :class='[{ active: isDisabled("edit") }]' @click.prevent='setComponent("edit")'>Изменить</button>
                              </li>
                         </ul>
                    </div>
               </div>
          </nav>     
          <transition name='form' mode='out-in'>
               <keep-alive>
                    <div class="container mx-auto flex justify-center items-center">
                         <component :feedback='feedback' :is="currentComponent" @register-form='handleForm' @signin-form='handleForm'></component>
                    </div>
               </keep-alive>
          </transition>
     </div>
      
     <template id="registerTemplate">
          <form @submit.prevent='onSubmit' ref='form' action="" class='w-1/3'>
                  <h2 class="font-bold mb-6 text-center text-2xl">Регистрация</h2>
                  <div class="border-teal p-8 border-t-12 bg-white mb-6 rounded-lg shadow-lg">
                         <div class="mb-4" >
                              <label class="font-bold text-grey-darker block mb-2" for="firstname">Имя</label>
                              <input class="block appearance-none w-full bg-white border border-grey-light hover:border-grey px-2 py-2 rounded shadow" required type="text" v-model.trim='user.firstname' id='firstname' placeholder="Имя">
                         </div>
                         <div class="mb-4">
                              <label class="font-bold text-grey-darker block mb-2" for="lastname">Фамилия</label>
                              <input class="block appearance-none w-full bg-white border border-grey-light hover:border-grey px-2 py-2 rounded shadow" required type="text" v-model.trim='user.lastname' id='lastname' placeholder="Фамилия">
                         </div>
                         <div class="mb-4">
                              <label class="font-bold text-grey-darker block mb-2" for="email">E-mail</label>
                              <input class="block appearance-none w-full bg-white border border-grey-light hover:border-grey px-2 py-2 rounded shadow" required type="email" v-model.trim='user.email' id='email' placeholder="E-mail">
                         </div>
                         <div class="mb-4">
                              <label class="font-bold text-grey-darker block mb-2" for="password">Пароль</label>
                              <input class="block appearance-none w-full bg-white border border-grey-light hover:border-grey px-2 py-2 rounded shadow" required type="password" v-model='user.password' placeholder="Пароль" id='password'>
                         </div>
                         <div class="mb-4">
                              <label class="font-bold text-grey-darker block mb-2" for="passwordcheck">Повторите пароль</label>
                              <input class="block appearance-none w-full bg-white border border-grey-light hover:border-grey px-2 py-2 rounded shadow" required type="password" v-model='user.passwordChck' placeholder="Повторите пароль" id='passwordcheck'>
                         </div>
                         <input class="bg-teal-dark hover:bg-teal text-white font-bold py-2 px-4 rounded" type="submit" :disabled='!isFormValid' value='Регистрировать'>
                  </div>
          </form>
     </template>
      
       <template id="signinTemplate">
            <form ref='form' @submit.prevent='handleForm' action="" class='signin-form'>
                  <h2>Войти</h2>
                  <div class="form-group">
                       <label for="email">E-mail</label>
                       <input required v-model='user.email' type="email" id='email' placeholder="E-mail">
                  </div>
                  <div class="form-group">
                       <label for="password">Пароль</label>
                       <input required v-model='user.password' type="password" id='password' placeholder="Пароль">
                  </div>
                  <input :disabled='!isFormValid' type="submit" value="Войти">
            </form>
       </template>
      
       <template id="editTemplate">
    <div class="eight wide column">
      <div class="ui segment">
        <h2 class="ui dividing header">Edit Profile</h2>

        <form class="ui form">
          <div class="field">
            <label>Full Name</label>
            <input type="text" name="name" v-model="name">
          </div>

          <div class="field">
            <label>Username</label>
            <input type="text" name="username" v-model="username">
          </div>

          <div class="field">
            <label>Email</label>
            <input type="email" name="email" v-model="email" placeholder="Email">
          </div>

          <div class="field">
            <label>Bio</label>
            <textarea v-model="bio" rows="5" placeholder="A breif bio of you"></textarea>
          </div>

          <div class="field">
            <label>Location</label>
            <input type="text" v-model="location" placeholder="Your location">
          </div>

          <div class="field">
            <label>Website URL</label>
            <input type="url" v-model="websiteUrl" placeholder="Website URL">
          </div>

          <button class="ui button primary">Update profile</button>
        </form>
      </div>
    </div>
     </template>

       <template id="feedbackTemplate">
            <div class="feedback">
                  <header>
                       <h2>{{ title }}</h2>
                  </header>
                  <div v-if='feedback.type === "register"'>
                      <p>Добро пожаловать <strong>{{ feedback.data | name }}</strong>.</p>
                      <p> Чтобы подтвердить на ваше письмо - {{ feedback.data | email }} отправлено письмо для завершения регистрация.</p>
                  </div>
                  <div v-else>
                       <p>Вы будете перенаправлены через несколько минут ...</p>
                  </div>
            </div>
       </template>


       <script src="js/vue.js"></script>
       <script src="js/app.js"></script>
    </body>
</html>